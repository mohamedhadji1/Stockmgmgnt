<div class="main-wrapper">
 <app-navigation-bar></app-navigation-bar>

  <div class="page-wrapper">
    <div class="content">
      <div class="page-header">
        <div class="add-item d-flex">
          <div class="page-title">
            <h4>New Claim</h4>
            <h6>Create new Claim</h6>
          </div>
        </div>

      </div>

      <form [formGroup]="addClaimForm" (ngSubmit)="onSubmit()">
        <div class="card">
          <div class="card-body add-product pb-0">
            <div class="accordion-card-one accordion" id="accordionExample">
              <div class="accordion-item">
                <div class="accordion-header" id="headingOne">
                  <div
                    class="accordion-button"
                    data-bs-toggle="collapse"
                    data-bs-target="#collapseOne"
                    aria-controls="collapseOne"
                  >
                    <div class="addproduct-icon">
                      <h5>
                        <i data-feather="info" class="add-info"></i>
                        <span>Claim Information</span>
                      </h5>
                      <a href="javascript:void(0);">
                        <i
                          data-feather="chevron-down"
                          class="chevron-down-add"
                        ></i>
                      </a>
                    </div>
                  </div>
                </div>
                <div id="collapseOne" class="accordion-collapse collapse show" aria-labelledby="headingOne">
                  <div class="accordion-body">
                    <!-- Client (User) -->
                    <div class="row">
                      <div class="col-lg-4 col-sm-6 col-12">
                        <div class="input-blocks">
                          <label>Client</label>
                          <select class="form-control" formControlName="client">
                            <option *ngFor="let user of users" [ngValue]="user">
                              {{ user?.username }}
                            </option>
                          </select>
                        </div>
                      </div>

                      <!-- Message -->
                      <div class="col-lg-12 col-sm-12 col-12">
                        <div class="input-blocks">
                          <label>Message</label>
                          <textarea class="form-control" rows="3" formControlName="message"></textarea>
                        </div>
                      </div>

                      <!-- Returns Section -->
                      <div formArrayName="returns">
                        <div *ngFor="let returnControl of returns.controls; let i=index" [formGroupName]="i">
                          <div class="row mb-3">
                            <!-- Product -->
                            <div class="col-lg-6 col-sm-6 col-12">
                              <div class="input-blocks">
                                <label>Product</label>
                                <select class="form-control" formControlName="product">
                                  <option *ngFor="let product of products" [ngValue]="product">
                                    {{ product.name }}
                                  </option>
                                </select>
                              </div>
                            </div>

                            <!-- Quantity -->
                            <div class="col-lg-4 col-sm-4 col-12">
                              <div class="input-blocks">
                                <label>Quantity</label>
                                <input type="number" class="form-control" formControlName="quantity" />
                              </div>
                            </div>

                            <!-- Delete Button -->
                            <div class="col-lg-2 col-sm-2 col-12 d-flex align-items-center">
                              <button type="button" (click)="removeReturn(i)" class="btn btn-danger">
                                Delete
                              </button>
                            </div>
                          </div>
                        </div>
                      </div>

                      <!-- Add More Returns -->
                      <div class="col-lg-12">
                        <button type="button" (click)="addReturn()" class="btn btn-secondary">
                          Add Return
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="col-lg-12">
          <div class="btn-addproduct mb-4">
            <button type="button" class="btn btn-cancel me-2" data-bs-dismiss="modal">
              Cancel
            </button>
            <button type="submit" class="btn btn-submit">Submit</button>
          </div>
        </div>
      </form>

    </div>
  </div>
</div>
